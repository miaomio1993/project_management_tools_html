<html>
	<head>
		<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="assets/css/xenon-core.css">
		<link rel="stylesheet" href="assets/css/xenon-forms.css">
		<link rel="stylesheet" href="assets/css/xenon-components.css">
		<link rel="stylesheet" href="assets/css/xenon-skins.css">
		<link rel="stylesheet" href="assets/css/custom.css">
		<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
		<title>编辑项目</title>
	</head>

	<body style="padding: 15px;">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title">编辑项目</h3>
			</div>
			<div class="panel-body">
				<div class="form-horizontal">
					<div class="form-group">
						<label class="col-sm-2 control-label">项目名称</label>
						<div class="col-sm-10">
							<input id="id" type="hidden">
							<input id="name" type="text" class="form-control">
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">项目描述</label>
						<div class="col-sm-10">
							<input id="depict" type="text" class="form-control">
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">是否可看</label>
						<div class="col-sm-10">
							<input id="isShow" type="checkbox" value="true" checked />
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">&nbsp;</label>
						<div class="col-sm-10">
							<button onclick="up()" class="btn btn-secondary btn-single">保&nbsp;&nbsp;存</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<script src="https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
		<script src="https://cdn.bootcss.com/bootstrap-switch/3.3.4/js/bootstrap-switch.min.js"></script>
		<script src="assets/js/initialization.js"></script>
		
		<script type="text/javascript">
			// 初始化控件
			$(function() {
				$("#isShow").bootstrapSwitch({
					onText: "YSE",
					offText: "NO",
					onColor: "success",
					offColor: "danger",
					size: "small",
					inverse: "true",
					// 当开关状态改变时触发
					onSwitchChange: function(event, state) {
						if (state == true) {
							$("#isShow").val("true");
						} else {
							$("#isShow").val("false");
						}
					}
				});
				
				$.ajax({
					type: 'get',
					url: url + "project/getInfo",
					data: {
						id: getUrlParam("id")
					},
					success: function(data) {
						if(data.code == 0){
							data = data.data;
							$("#id").val(data.id);
							$("#name").val(data.name);
							$("#depict").val(data.depict);
							$("#isShow").val(data.isShow);
						} else{
							alert(data.msg);
						}
					}
				});
			});

			function up() {
				var projectId = $("#projectId").val();
				var name = $("#name").val();
				var depict = $("#depict").val();
				var isShow = $("#isShow").val();
				if (name == null || name == "") {
					alert("请输入项目名称");
					return;
				}
				if (depict == null || depict == "") {
					alert("请输入项目描述");
					return;
				}
				$.ajax({
					type: 'post',
					url: url + "project/up",
					data: {
						id: id,
						name: name,
						depict: depict,
						isShow: isShow
					},
					success: function(data) {
						alert(data.msg);
					}
				});
			})
			
			// 删除项目
			function deProject(id){
				$.ajax({
					type: 'get',
					url: url + "project/del",
					async: false,
					data: {
						projectId: projectId
					},
				});
			}
		</script>
	</body>
</html>
