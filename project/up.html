<html>
	<head>
		<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap-switch/3.3.4/css/bootstrap3/bootstrap-switch.min.css">
		<link rel="stylesheet" href="../assets/css/xenon-core.css">
		<link rel="stylesheet" href="../assets/css/xenon-forms.css">
		<link rel="stylesheet" href="../assets/css/xenon-components.css">
		<link rel="stylesheet" href="../assets/css/xenon-skins.css">
		<link rel="stylesheet" href="../assets/css/custom.css">
		<script src="https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"></script>
		<title>编辑项目</title>
	</head>

	<body style="padding: 15px;">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title">UPDATE PROJECT</h3>
			</div>
			<div class="panel-body">
				<div class="form-horizontal">
					<div class="form-group">
						<label class="col-sm-2 control-label">Project Name</label>
						<div class="col-sm-6">
							<input id="projectId" type="hidden">
							<input id="name" type="text" class="form-control">
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">Project Depict</label>
						<div class="col-sm-6">
							<input id="depict" type="text" class="form-control">
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">Is Show</label>
						<div class="col-sm-6">
							<input id="isShow" type="checkbox" value="true" checked />
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">&nbsp;</label>
						<div class="col-sm-6">
							<button onclick="up()" class="btn btn-secondary btn-single">保&nbsp;&nbsp;存</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
		<script src="https://cdn.bootcss.com/bootstrap-switch/3.3.4/js/bootstrap-switch.min.js"></script>
		<script src="../assets/js/initialization.js"></script>
		
		<script type="text/javascript">
			// 初始化控件
			$(function() {
				$("#projectId").val(getUrlParam("projectId"));
				
				$("#isShow").bootstrapSwitch({
					onText: "YSE",
					offText: "NO",
					onColor: "success",
					offColor: "danger",
					size: "small",
					inverse: "true",
					// 当开关状态改变时触发
					onSwitchChange: function(event, state) {
						if (state == true) {
							$("#isShow").val("true");
						} else {
							$("#isShow").val("false");
						}
					}
				});
				
				$.ajax({
					type: 'post',
					url: url + "project/getInfo",
					data: {
                        projectId: $("#projectId").val()
					},
					success: function(data) {
						if(data.code == 0){
							data = data.data;
							$("#id").val(data.id);
							$("#name").val(data.name);
							$("#depict").val(data.depict);
							if(data.isShow == 2){
								$('#isShow').bootstrapSwitch('state', false);
							} else if(data.isShow == 1){
								$('#isShow').bootstrapSwitch('state', true);
							}
						} else{
							alert(data.msg);
						}
					}
				});
			});

			function up() {
				var name = $("#name").val();
				var depict = $("#depict").val();
				if (name == null || name == "") {
					alert("请输入项目名称");
					return;
				}
				if (depict == null || depict == "") {
					alert("请输入项目描述");
					return;
				}
				$.ajax({
					type: 'post',
					url: url + "project/up",
					data: {
						projectId: $("#projectId").val(),
						name: name,
						depict: depict,
						isShow: $("#isShow").val()
					},
					success: function(data) {
						alert(data.msg);
					}
				});
			}
			
			// 删除项目
			function deProject(id){
				$.ajax({
					type: 'get',
					url: url + "project/del",
					async: false,
					data: {
						id: $("#id").val(),
					},
				});
			}
		</script>
	</body>
</html>
