<html>
	<head>
		<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">
		<link href="https://cdn.bootcss.com/bootstrap-switch/3.3.4/css/bootstrap3/bootstrap-switch.min.css" rel="stylesheet">
		<link rel="stylesheet" href="assets/css/xenon-core.css">
		<link rel="stylesheet" href="assets/css/xenon-forms.css">
		<link rel="stylesheet" href="assets/css/xenon-components.css">
		<link rel="stylesheet" href="assets/css/xenon-skins.css">
		<link rel="stylesheet" href="assets/css/custom.css">
		<script src="https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"></script>
		<title>全部接口</title>
	</head>

	<body>
		<div class="row" style="padding: 20px 20px 0; margin: auto;">
			<div class="col-sm-12">
				<a class="btn btn-white" href="project_add.html">新增项目</a>
			</div>
		</div>
		<div id="projectList" style="padding: 20px; margin: auto;">
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
		<script src="https://cdn.bootcss.com/bootstrap-switch/3.3.4/js/bootstrap-switch.min.js"></script>
		<script src="assets/js/initialization.js"></script>

		<script type="text/javascript">
			// 初始化控件
			$(function() {
				getProjectList();
			});

			function getProjectList() {
				$.ajax({
					type: 'get',
					url: url + "project/getProjectList",
					async: false,
					success: function(data) {
						if (data.code == 0) {
							data = data.data;
							$("#projectList").html("");
							var str = "";
							for (var i = 0; i < data.length; i++) {
								str += "<div class='panel panel-default'>";
								str += "<div class='panel-heading'>";
								str += "<span>" + data[i].name + "</span>";
								str += "<a class='btn btn-white btn-xs pull-right' href='modular_add.html?id=" + data[i].id + "'>新增模块</a>";
								str += "<a class='btn btn-white btn-xs pull-right' style='margin-right: 10px;' href='project_up.html?id=" + data[i].id + "'>修改项目</a> ";
								str += "<table id='table" + data[i].id + "' class='table table-striped'>";
								str += "<thead><tr><th>ID</th><th>模块名称</th><th>模块描述</th><th>开始日期</th><th>结束日期</th><th>进度</th><th>是否可看</th><th>&nbsp;</th></tr></thead>";
								str += "<tbody>";
                                for (var j = 0; j < data[i].templateListDtoList.length; j++) {
                                    str += "<tr>";
                                    str += "<td>" + data[i].templateListDtoList[j].id + "</td>";
                                    str += "<td>" + data[i].templateListDtoList[j].name + "</td>";
                                    str += "<td>" + data[i].templateListDtoList[j].depict + "</td>";
                                    str += "<td>" + formatDate(data[i].templateListDtoList[j].startTime) + "</td>";
                                    str += "<td>" + formatDate(data[i].templateListDtoList[j].endTime) + "</td>";
                                    str += "<td class='middle-align'>";
                                    str += "<div class='progress'>";
                                    str += "<div class='progress-bar progress-bar-info' role='progressbar' aria-valuenow='20' aria-valuemin='0' aria-valuemax='100' style='width: 20%'>";
                                    str += "<span class='sr-only'>20% Complete</span>";
                                    str += "</div>";
                                    str += "</div>";
                                    str += "</td>";
                                    if(data[i].templateDtoList[j].isShow == 1){
                                        str += "<td>是</td>";
                                    } else if(data[i].templateDtoList[j].isShow == 2){
                                        str += "<td>否</td>";
                                    }
                                    str += "<td><a href='modular_up.html?id=" + data[i].templateDtoList[j].id + "'><i class='fa fa-pencil' title='编辑'></i></a></td>";
                                    str += "</tr>";
                                }
								str += "</tbody>";
								str += "</table>";
								str += "</div>";
								str += "</div>";
							}
                            $("#projectList").append(str);
						} else {
							alert(data.msg);
						}
					}
				});
			}

		</script>
	</body>
</html>
